$(function(){function i(){var i;$("a.list_title").unbind().click(function(i){i.stopPropagation();var t=$(this).children("b").text(),e=$(this).attr("id");window.location.href=encodeURI("/simulation/page/recordDetail?"+JSON.stringify({name:t,typeId:e}))});for(var t=$("a.list_title span"),e=0;e<t.length;e++)t.eq(e).unbind().click(function(t){t.stopPropagation();var e=$(this).children();i=e,"/resources/img/simulation/menu2.png"!=e.attr("src")?(e.attr("src","/resources/img/simulation/menu2.png"),$(this).next().show()):(e.attr("src","/resources/img/simulation/menu.png"),$(this).next().hide()),$("body").click(function(){$(".editDiv").hide(),e.attr("src","/resources/img/simulation/menu.png")});for(var n=$(this).parent().parent().siblings(),a=0;a<n.length;a++)n.eq(a).find("img").attr("src","/resources/img/simulation/menu.png"),n.eq(a).find(".editDiv").hide()});$(".edit").unbind().click(function(i){i.stopPropagation(),$(".editBox").slideDown();var t=$(this).parent().parent(),e=$(this).parent().parent().parent().parent(),n=$(this).parents("a.list_title").children("b"),a=$(this).parents("a.list_title").attr("id"),l=n.text();$(".editBox").find("input").val(l),$(".editBox").find("input").focus(),t.hide(),$(".confirmBtnEdit").unbind().click(function(){var i=$(".editBox").find("input").val();$(".editBox").hide(),n.text(i),$.post("/simulation/type/update",{id:a,name:i,remark:""},function(i){var t=JSON.parse(i);console.log(t),alert(t.msg)})}),$(".closeIcon2").click(function(){$(".editBox").hide(),e.find("img").attr("src","/resources/img/simulation/menu.png")}),$(".cancelBtnEdit").click(function(){$(".editBox").hide()})}),$(".cancel").unbind().click(function(i){i.stopPropagation(),$(this).parent().parent().hide(),$(this).parent().parent().prev().children().attr("src","/resources/img/simulation/menu.png")}),$(".delete").unbind().click(function(i){i.stopPropagation(),$(".confirmBox").slideDown();var t=$(this).parent().parent(),e=$(this).parent().parent().parent().parent(),n=$(this).parents(".list_title").attr("id");t.hide(),$(".confirmCBtn").unbind().click(function(){$(".confirmBox").hide(),e.hide(),$.post("/simulation/type/remove",{id:n},function(i){var t=JSON.parse(i);console.log(t),alert(t.msg)})}),$(".closeIcon").click(function(){$(".confirmBox").hide(),e.find("img").attr("src","/resources/img/simulation/menu.png")}),$(".cancelCBtn").click(function(){$(".confirmBox").hide(),e.find("img").attr("src","/resources/img/simulation/menu.png")})})}function t(t,e){$.post(t,e,function(t){var e=JSON.parse(t);if(0!=e.result.length){for(var n="",a=0;a<e.result.length;a++)n+="<li><a id = "+e.result[a].id+' class="list_title"><b>'+e.result[a].name+'</b><span><img src="/resources/img/simulation/menu.png" /> </span><div class="editDiv"><ul><li class="edit">编辑</li><li class="delete">删除</li><li class="cancel">取消</li></ul></div></a></li>';$(".drillType").children().remove(),$(".drillType").append(n),$(".drillType").find("li:last-child").css("border-bottom","1px solid #c1c1c1"),$(".drillType").find("li:first-child").children().css("border-top","none"),i()}})}$(".addClassification").click(function(){$(".popBox").slideDown(),$(".popBox").find("input").focus()}),$(".confirmBtn").click(function(){var t=$("#typeName").val();if(""!=t&&null!=t&&32!=t.charCodeAt()){$(".popBox").hide(),$.post("/simulation/type/add",{createUserId:1,name:t,remark:""},function(i){var t=JSON.parse(i);alert(t.msg)});var e='<li><a class="list_title"><b>'+t+'</b><span><img src="/resources/img/simulation/menu.png" /> </span><div class="editDiv"><ul><li class="edit">编辑</li><li class="delete">删除</li><li class="cancel">取消</li></ul></div></a></li>';$(".archives_list").children("ul").append(e),$(".archives_list ul li:last-child").css("border-bottom","1px solid #c1c1c1"),i()}else alert("请输入正确的名称")}),$(".cancelBtn").click(function(){$(".popBox").hide()}),$(".closeIcon1").click(function(){$(".popBox").hide()});var e={createUserId:1,pageNo:0};t("/simulation/type/getAll",e),e.pageNo=1;var n=0;$.ajaxSetup({async:!1}),$.post("/simulation/type/getAll",e,function(i){var t=JSON.parse(i);n=t.pageCount}),$("#currentPage").text(e.pageNo),$("#totalPage").text(n),$("#firstPage").click(function(){1!=e.pageNo&&(e.pageNo=1,t("/simulation/type/getAll",e),$("#currentPage").text(e.pageNo))}),$("#prePage").click(function(){1!=e.pageNo&&(e.pageNo--,t("/simulation/type/getAll",e),$("#currentPage").text(e.pageNo))}),$("#nextPage").click(function(){e.pageNo!=n&&(e.pageNo++,t("/simulation/type/getAll",e),$("#currentPage").text(e.pageNo))}),$("#lastPage").click(function(){e.pageNo!=n&&(e.pageNo=n,t("/simulation/type/getAll",e),$("#currentPage").text(e.pageNo))}),$(".drillType").css("height",parseInt(window.innerHeight)-150+"px"),window.onresize=function(){$(".drillType").css("height",parseInt(window.innerHeight)-150+"px")}});